# 一.gbase8s

[https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0889.html](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0889.html)  
**LOCK TABLE 语句**  
使用 LOCK TABLE 语句来控制通过其他进程访问表。

![LOCK TABLE owner. table synonym SHARE EXCLUSIVE MODE ](Exported%20image%2020250328134709-0.png)  

|   |   |   |   |
|---|---|---|---|
|**元素**|**描述**|**限制**|**语法**|
|_owner_|_synonym_ 或 _table_ 的所有者|必须为指定的对象的所有者|[所有者名称](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1701.html#ids_sqs_1701)|
|_synonym_|要被锁定的表的同义词|同义词以及指向它的表必须存在|[标识符](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1660.html#ids_sqs_1660)|
|_table_|要被锁定的表|请参阅 [用法](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0889.html#ids_sqs_0889__sii-02info-68043) 的第一段。|[标识符](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1660.html#ids_sqs_1660)|

**用法**  
此语句是对 SQL 的 ANSI/ISO 标准的扩展。  
如果下列任一为真，则您可使用 LOCK TABLE 来锁定表：

- 您是该表的所有者。
- 您有对该表或对该表中列的 Select 权限，或通过直接授权，或通过授权给 PUBLIC 或给您的当前角色。

如果该表已被另一进程在 EXCLUSIVE 模式下锁定，或如果您请求 EXCLUSIVE 锁而另一用户已经以 SHARE 模式锁定了同一张表，则 LOCK TABLE 语句失败。  
SHARE 关键字以_共享模式_锁定表。共享模式允许其他进程对该表的_读_访问，但拒绝_写_访问。如果以共享模式锁定表，则其他进程不可更新或删除数据。  
EXCLUSIVE 关键字以_排他模式_锁定表。此模式拒绝其他进程对表进行读访问，也拒绝写访问。 在下列语句期间，排他模式锁定自动地发生：

- ALTER FRAGMENT
- ALTER INDEX
- ALTER TABLE
- CREATE INDEX
- DROP INDEX
- RENAME COLUMN
- RENAME TABLE
- START VIOLATIONS TABLE
- STOP VIOLATIONS TABLE
- TRUNCATE

**在一些 DDL 操作中的 ONLINE 关键字**  
在某些 ALTER FRAGMENT、DROP INDEX 和 CREATE INDEX 操作期间，包括 ONLINE 关键字在内，当并发的会话尝试访问同一表时，可减低运行时出错的风险。要获取更多关于支持 ONLINE 关键字选项的那些 DDL 语句的锁定行为的信息，请参阅这些主题：

- [在 ATTACH 操作中使用 ONLINE 关键字](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1940.html#ids_sqs_1940)
- [在 DETACH 操作中使用 ONLINE 关键字](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1941.html#ids_sqs_1941)
- [在 MODIFY 操作中使用 ONLINE 关键字](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_1942.html#ids_sqs_1942)
- [CREATE INDEX 的 ONLINE 关键字](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0441.html#ids_sqs_0441)
- [DROP INDEX 的 ONLINE 关键字](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0719.html#ids_sqs_0719).

**在辅助服务器上的 LOCK TABLE 语句行为**  
在高可用性集群中，您可从可更新的辅助服务器上设置表的排他锁。对于来自辅助服务器的排他模式锁请求，会话可读该表但不可更新它。此行为类似于辅助服务器上的共享访问模式；即，当一会话在给定的表上有排他锁时，其他会话不可获取那个表上的共享或排他锁。  
在只读的辅助服务器上，发出 LOCK TABLE 语句的会话不锁定该表，且数据库服务器不向客户端返回错误。  
集群中的共享模式锁的行为与单独服务器的相同。在成功地运行 LOCK TABLE 语句之后，用户可读该表但不可改变它，直到释放该锁为止。

- **对带有共享锁的表的并发访问**
- **对带有排他锁的表的并发访问**
- **带有事务日志记录的数据库**
- **无事务日志记录的数据库**
- **锁定粒度**

**父主题：** [SQL 语句](https://docs.gbasedbt.com/gbase8s/sqs/ids_sqs_0228.html)