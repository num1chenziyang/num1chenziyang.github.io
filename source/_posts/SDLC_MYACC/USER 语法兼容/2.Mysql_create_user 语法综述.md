# 一.Mysql

[https://dev.mysql.com/doc/refman/8.0/en/create-user.html](https://dev.mysql.com/doc/refman/8.0/en/create-user.html)
    
# 二.MySQL 的 CREATE USER 语句

==CREATE USER opt_if_not_exists create_user_list== ==￼====[default_role_clause]== ==￼====[require_clause]== ==￼====[connect_options]== ==￼====[opt_account_lock_password_expire_options]== ==￼====[opt_user_attribute];==  
==各部分详解==

## 1. opt_if_not_exists

- ==作用：可选子句，用于指定在创建用户时如果用户已经存在，则不执行创建操作并避免报错。==
- ==语法：====￼====[IF NOT EXISTS]==
   

## 2. create_user_list

- ==作用：定义要创建的一个或多个用户及其认证信息（如密码）。==
- ==语法：====￼====user_specification [, user_specification] ...==
    
    - ==user_specification== ==包括用户名、主机名和认证信息（如密码）。例如：====￼===='username'====@===='hostname'== ==IDENTIFIED BY== =='password'==
   

## 3. default_role_clause

- ==作用：为新创建的用户设置默认角色。每当用户登录时，默认情况下会自动激活这些角色。==
- ==语法：====￼====DEFAULT== ==ROLE { ALL | NONE | role_name [, role_name ...] } [TO user_list]==
   

## 4. require_clause

- ==作用：指定连接到服务器时用户必须满足的安全要求，如 SSL 或 X509 证书。==
- ==语法：====￼====REQUIRE== =={ NONE | SSL | X509 | CIPHER== =='cipher'== ==| ISSUER== =='issuer'== ==| SUBJECT== =='subject'== ==}==
   

## 5. connect_options

- ==作用：设置与用户连接相关的资源限制和其他选项，以控制用户的连接行为。==
- ==语法：====￼====[RESOURCE LIMIT]====￼== ==MAX_QUERIES_PER_HOUR count====￼== ==MAX_UPDATES_PER_HOUR count====￼== ==MAX_CONNECTIONS_PER_HOUR count====￼== ==MAX_USER_CONNECTIONS count==
   

## 6. opt_account_lock_password_expire_options

- ==作用：管理账户锁定状态和密码过期策略。==
- ==语法：====￼====[ACCOUNT { LOCK | UNLOCK }]====￼====[PASSWORD EXPIRE {== ==DEFAULT== ==| NEVER | INTERVAL N DAY }]==
   

## 7. opt_user_attribute

- ==作用：为用户设置额外属性，如用户名字、组织等元数据信息（具体支持取决于 MySQL 版本）。==
- ==语法：====￼====[ATTRIBUTE== =='{"key": "value", ...}'====]==
 
==示例==  
==假设我们想要创建一个名为== ==john== ==的用户，设置默认角色为== ==developer====，要求使用 SSL 连接，限制每小时最多 100 次查询，并且账户创建后立即锁定：==
 
==sql==  
==深色版本==  
==CREATE USER== ==IF== ==NOT EXISTS== =='john'====@===='localhost'== ==IDENTIFIED BY== =='securepassword'====￼====DEFAULT== ==ROLE== =='developer'====￼====REQUIRE== ==SSL====￼====WITH MAX_QUERIES_PER_HOUR== ==100====￼====ACCOUNT LOCK;==  
==总结==  
通过上述各部分的组合，MySQL 的 CREATE USER 语句提供了丰富的选项来创建和配置数据库用户，确保安全性和灵活性的同时，也能够有效地管理和限制用户的活动。这不仅提高了数据库的安全性，还增强了管理员对用户行为的控制能力。