![为 什 么 需 要 Database? DBMS 的 提 出 分 离 逻 辑 层 和 物 理 层 数 据 模 型 Relational Model 参 考 ](Exported%20image%2020250328133857-0.png)  
![CMU 1 5 ． 445 ／ 645 DATABASE SYSTEMS Relational Data Model 为 什 么 需 要 Database? 假 设 我 们 需 要 存 储 艺 术 家 (Artists) 信 息 艺 术 家 发 行 的 专 辑 (Albums) 信 息 我 们 可 以 用 两 个 CSV 文 件 来 分 别 存 储 艺 术 家 和 专 辑 信 息 ， 然 后 用 程 序 来 解 析 和 序 列 化 相 关 数 据 ． 艺 术 家 信 息 表 ． Artist ℃ SV "Wu Tang Clan 1992 ， "USA" "Notorious BIG",1992, "USA" "Ice Cube" ， 1989 ， "USA" 专 辑 信 息 表 ： Album.csv "Enter the Wu Tang" ， "Wu Tang C1anL1993 "St.Ides Mix Tape" ， "Wu Tang Clan" ， 1994 "AmeriKKKa's Most Wanted" ， "Ice Cube" ， 1990 假 设 我 们 想 知 道 "Ice Cube 在 哪 年 首 发 " ， 就 会 写 这 样 的 查 讠 旬 脚 本 ： fo 工 1 讣 e in file. record parse(line) if record[OJ "Ice Cube" print(int(record[l])) 但 这 种 简 单 的 方 案 有 很 多 缺 陷 ． · 数 据 的 质 量 方 面 。 很 难 保 证 同 一 个 艺 术 家 发 行 的 每 条 专 辑 信 息 中 ， 艺 术 家 字 段 一 致 。 很 难 阻 止 用 户 在 年 份 字 段 写 入 不 合 法 的 字 符 串 。 很 难 优 雅 地 处 理 一 张 专 辑 由 多 个 艺 术 家 共 同 发 行 的 情 况 · 实 现 方 面 。 查 讠 旬 一 条 特 定 的 记 录 ， 效 率 低 当 有 多 个 应 用 使 该 CSV 数 据 库 到 查 询 脚 本 需 要 重 复 写 到 多 个 线 程 一 起 写 时 ， 如 何 保 证 数 据 一 致 性 · 数 据 持 久 。 正 在 写 记 录 时 遇 到 宕 机 。 如 何 复 制 数 据 库 到 多 台 机 器 上 来 保 证 高 可 用 性 以 上 缺 陷 迫 亻 吏 我 们 需 要 升 级 CSV 数 据 库 ， 于 是 就 有 了 专 业 的 数 据 库 系 统 (DBMS) 。 DBMS 的 提 出 分 离 逻 辑 层 和 物 理 层 所 有 系 统 都 会 产 生 数 据 ， 因 此 数 据 库 几 乎 是 所 有 系 统 都 不 可 或 缺 的 模 块 。 在 早 期 ， 各 个 项 目 各 自 造 轮 子 ， 因 为 每 个 轮 子 都 是 为 应 用 量 身 打 造 ， 这 些 系 统 的 逻 辑 层 (logical) 和 物 理 层 (physical) 普 遍 耦 合 度 很 高 。 Ted Codd 发 现 这 个 问 题 后 ， 提 出 DBMS 的 抽 象 (Abstraction) ： · 用 简 单 的 、 统 一 的 数 据 结 构 存 储 数 据 · 通 过 高 级 语 言 操 作 数 据 逻 辑 层 和 物 理 层 分 离 ， 系 统 开 发 者 只 关 心 逻 辑 层 ， 而 DBMS 开 发 者 才 关 心 物 理 层 。 数 据 模 型 在 逻 辑 层 中 ， 我 们 通 常 需 要 对 所 需 存 储 的 数 据 进 行 建 模 。 如 今 ， 市 面 上 有 的 数 据 模 型 包 括 ． · Relational ： > 大 部 分 DBMS 属 于 关 系 型 ， 也 是 本 课 讨 论 的 重 点 Key/Value Graph Document Column-family Array/Matrix Relational Model Relation & Tuple 每 个 Relation 都 是 一 个 无 序 集 合 (unordered set), 集 合 中 的 元 素 称 为 tuple, 成 ， 这 些 属 性 在 逻 辑 上 通 常 有 内 在 联 系 。 每 个 tuple 由 一 组 属 性 构 Primary Keys primary key 在 一 个 Relation 中 唯 一 确 定 一 个 tup | e ， pri mary keyo Foreign Keys 如 果 你 不 指 定 ， 有 些 DBMSs 会 自 动 帮 你 生 成 foreign key 唯 一 确 定 另 一 个 relation 中 的 一 个 tuple 利 用 这 些 基 本 概 念 ， 我 们 就 可 以 利 第 三 张 表 ， ArtistAIbum, 来 解 决 专 辑 与 艺 术 家 的 1 对 多 的 关 系 问 题 ： Artist id, name, Album id, name, ArtistAlbum year, year country artist id, album id Data Manipulation Languages (DML) 在 Relational Model 中 从 数 据 库 中 查 询 数 据 通 常 有 两 种 方 式 ： Procedural 与 NonProcedural: · Procedural: 查 询 命 令 需 要 指 定 DBMS 执 行 时 的 具 体 查 询 策 略 ， 如 Relational Algebra · Non-Procedural: 查 询 命 令 只 需 要 指 定 想 要 查 询 哪 些 数 据 ， 无 需 关 心 幕 后 的 故 事 ， 如 SQL 使 用 哪 种 方 式 是 具 体 的 实 现 问 题 ， 与 Relational Model 本 身 无 关 。 Relational Algebra relational algebra 是 基 于 set algebra 提 出 的 ， 包 括 ． Select （ 0 ） Projection （ 丌 ） Union (U) Intersection （ n) Difference （ 一 Product （ × ） · Join （ × ） Rename （ p) · Assignment （ 咒 S ） Duplicate Elimination （ 5 ） Aggregation （ 7 ） Sorting （ 丁 ） Division （ 咒 ÷ S) 从 relation 中 查 讠 旬 和 修 改 tup 《 es 的 一 些 基 本 操 作 ， 它 们 将 这 些 操 作 串 联 起 来 ， 我 们 就 能 构 建 更 复 杂 的 操 作 注 意 ： 使 用 Relation Algebra 时 ， 我 们 实 际 上 指 定 了 执 行 策 略 ， 如 ． 一 一 司 一 102 （ 月 × S ） t ， 5 ， （ 咒 × （ 0 凵 d 一 102 （ S ） ） 它 们 所 做 的 事 情 都 是 " 返 回 R 和 S Join 后 的 结 果 中 ， b-id 等 于 102 的 tuples"o 虽 然 Relational Algebra 只 是 Relational Model 的 具 体 实 现 方 式 ， 但 在 之 后 的 课 程 将 会 看 到 它 对 查 询 优 化 、 执 行 的 帮 助 。 参 考 slides previous Next ](Exported%20image%2020250328133901-1.png)