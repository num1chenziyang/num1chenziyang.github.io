---
title: （实战）1.机器修复
date: 2025-04-09 11:09:17
categories:
  - SDLC机器支持
tags: 
password:
---
# 一.Kernel panic内核崩溃
**Linux启动提示Kernel panic - not syncing: Attempted to kill init解决办法**  
[https://blog.51cto.com/chenshoubiao/1842152](https://blog.51cto.com/chenshoubiao/1842152)
关闭selinux就好了

---

# 二.libc系统库损坏

这个问题的主要原因是系统的**/lib64/libc-2.12.so**和**/lib64/libc.so.6**文件丢失或者软链接错误。  
centos6.5  
[https://www.cnblogs.com/yizhipanghu/p/10254186.html](https://www.cnblogs.com/yizhipanghu/p/10254186.html)  
centos7  
[https://blog.csdn.net/qq_43341057/article/details/123481413](https://blog.csdn.net/qq_43341057/article/details/123481413)
 
note：  
1.本次 198 服务器是 redhat6.5，用 centos7 也可以进入救援模式。原因是 198 的 libc-2.12.so 被替换为了 libc-2.17.so，往往是升级 git 和搭建 vscode 环境导致的（已经发生多次，现象多是很多系统命令用不了，报错 GLIBC 相关内容）。
 
2.本次现象是虚拟机未受影响，198 宿主机连接不上，重启后报错Kernel panic。
 
3.在替换 libc-2.17.so 为 libc-2.12.so 后，救援系统的很多命令（如 rm，cp，df 等）失效。原因是救援系统调用了libc-2.12.so，取错库了。本次使用 centos7（libc-2.17.so）救援 redhat6.5（libc-2.12.so 但是被误替为libc-2.17.so），所以进入救援系统时正常，替换/mnt/sysimage/lib64 下的libc-2.12.so 后反而救援系统命令失效，重启后原系统恢复正常，很有意思（也许用低版本即基于libc-2.12.so 的系统救援，一开始就报错，会误导我去重装系统）。
 
4.198 服务器自从 2023 年 5 月至 2024 年 11 月，已经损坏三次了。

---

# 三.机器保留数据重装

## 1.198损坏记录（2024 年 2 月）
因浪潮服务器主板与centos系统有某些冲突，出现microcode问题，会导致系统重启后进入安全模式。经尝试，此问题升级microcode无法解决，故而重装系统。  
在重装系统过程中，想要保留数据重装，但在选盘时只选一个盘提示没选全，这时应意识到系统是默认安装的，并未分区，系统和数据分散在两个盘里（将两个盘全选中，然后/home目录不格式化，此种保留数据重装未尝试，需找机会尝试）。  
此时未考虑当时安装系统分区与否，将其中一个硬盘格式化并安装新系统，导致另一个盘的数据不完整，格式损坏，不可挽回。  
最终将服务器手动分区重装redhat6.5，在手动分区重装时新建标准分区，/与/boot与swap硬盘选择sda，/home选择sdb，这样就避免了重装系统损坏sdb硬盘中/home内容。
   

## 2.centos7 保留数据重装
[https://blog.csdn.net/qq_40907977/article/details/109470461](https://blog.csdn.net/qq_40907977/article/details/109470461)  
其他系统大同小异。理解原理，熟能生巧。

---

# 四.启动报错
`an error occurred during the file system check.`
进入shell后，要用fsck(filesystem check)命令检测并修复文件系统，该指令使用方法如下：
```text
直接键入fsck，不带任何附加项  
&:fsck  
当提示<F/N>的时候全部键入Y  
直到重新回到shell，reboot重启电脑，这样，基本上就能恢复正常使用了
```
[https://blog.csdn.net/menglongfc/article/details/6337904](https://blog.csdn.net/menglongfc/article/details/6337904)

---
