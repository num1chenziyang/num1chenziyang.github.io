# 一.gdbi原理

alias gdbi='gdb attach `onstat -g glo | grep cpu | grep % | awk -F '\'' '\'' '\''{ print $2 }'\''`'
 
## 1.命令解析

1. ==alias gdbi='...'====:==
    
    - ==这是一个 shell 别名定义，将== ==gdbi== ==命令映射到后面的一系列命令。==
    - ==当你在终端中输入== ==gdbi== ==时，shell 会执行后面定义的命令。==
2. ==gdb attach ...====:==
    
    - ==gdb== ==是 GNU 调试器。==
    - ==attach== ==命令用于将== ==gdb== ==附加到一个正在运行的进程。==
    - ==后面的部分是一个命令替换，用于确定要附加的进程 ID。==
3. ==onstat -g glo | grep cpu | grep % | awk -F ' ' '{ print $2 }'====:==
    
    - ==这是一个管道命令序列，用于获取 Informix 数据库的 CPU 使用情况，并提取出相应的进程 ID。==
    - ==onstat -g glo====:==
        
        - ==onstat== ==是 Informix 数据库的一个管理工具，用于显示数据库的状态信息。==
        - ==-g glo== ==选项用于显示全局信息，包括所有在线的引擎和它们的 CPU 使用情况。==
    - ==grep cpu====:==
        
        - ==使用== ==grep== ==过滤出包含 "cpu" 的行，这些行通常包含了 CPU 使用情况的信息。==
    - ==grep %====:==
        
        - ==再次使用== ==grep== ==过滤出包含== ==%== ==的行，进一步缩小范围，确保只保留与 CPU 使用相关的行。==
    - ==awk -F ' ' '{ print $2 }'====:==
        
        - ==awk== ==是一个强大的文本处理工具。==
        - ==-F ' '== ==指定空格作为字段分隔符。==
        - =={ print $2 }== ==表示打印第二列，即进程 ID。==
 
## 2.整体流程

1. ==onstat -g glo====:==
    
    - ==获取 Informix 数据库的全局信息，输出包括多个引擎及其 CPU 使用情况的行。==
2. ==grep cpu====:==
    
    - ==从输出中筛选出包含 "cpu" 的行。==
3. ==grep %====:==
    
    - ==从上一步的结果中进一步筛选出包含== ==%== ==的行，确保只保留与 CPU 使用相关的行。==
4. ==awk -F ' ' '{ print $2 }'====:==
    
    - ==从最终筛选出的行中提取第二列，即进程 ID。==
5. ==gdb attach <process_id>====:==
    
    - ==将== ==gdb== ==附加到提取出的进程 ID 对应的进程上。==
 
## 3.示例输出

==1.====onstat -g glo== ==的输出如下：==  
==CPU usage by engine:====￼====Engine CPU% PID TID====￼====1 10% 1234 5678====￼====2 20% 2345 6789==
 
==2.====经过== ==grep cpu== ==和== ==grep %== ==后，输出为：==  
==1 10% 1234 5678====￼====2 20% 2345 6789==
 
==3.====再经过== ==awk -F ' ' '{ print $2 }'== ==后，输出为：==  
==1234====￼====2345==
 
==4.====最终，====gdb attach== ==会附加到第一个进程 ID 上，即== ==1234====。==
    
# 二.dbaccess 回滚

alias dbaccess='rlwrap -pRed dbaccess' #sql回滚插件