---
title: vim文本编辑器
date: 2025-04-20 15:55:56 
categories: 
- KB命令合集
- 
tags: 
password:
---

# vim 工具介绍
一.常用vim操作

:w        :q        :wq        :q!

:set nu    (:set number)

显示行号

:set nonu    (:set nonumber)

取消显示行号

:w [文件名]

将编辑后的内容保存到另一个文件中（另存为，如果[文件不存在](https://so.csdn.net/so/search?q=%E6%96%87%E4%BB%B6%E4%B8%8D%E5%AD%98%E5%9C%A8&spm=1001.2101.3001.7020)则创建文件并存入）

:2,5w [文件名]

将第2到5行的内容保存到另一个文件中（指定行另存为）

:r [文件名]

输入另一个文件的内容，到光标的下一行

:1,$d

从第一行到最后一行，全部删除

:1,$y

从第一行到最后一行，全部复制（yanked）

:%s/old_string/new_string/g

将某个字符串全部替换为另一个字符串

Note：

    1.old_string 是您要替换的原始字符串。

    2.new_string 是您要替换为的新字符串。

    3.g 是一个标志位，表示“全局”（global），意味着替换每行中所有匹配的旧字符串。如果不包含 g，则只替换每行的第一个匹配字符串。

:727,857s/SQL/API/g

将727到857之间的SQL替换为API

:1,10s/\v(.*)/\U\1/g

1.        1,10：表示行范围，指定了我们要替换的行的范围为1到10行。

2.        s：表示进行替换操作。

3.        \v：启用“魔术模式”或者“非规范模式”，这意味着我们可以使用更简洁和直观的正则

           表达式语法来匹配文本。

4.        (.*)：这是正则表达式的一部分，表示匹配任意字符（除了换行符）零次或多次，并

       将其捕获到分组1中。

5.        \U：将接下来的字符全部转换为大写。

6.        \1：引用第一个捕获的分组，即(.*)中匹配到的内容。

7.        g：表示全局替换，在每一行中找到所有匹配项并进行替换。

这个命令会在1到10行的每一行中找到任意字符，然后将其全部转换为大写。

:let i=130 | 858,888g/$/s/$/\=i/ | let i=i+1

1.        let i=130：这个命令使用let关键字来定义一个变量i并将其初始化为130，

           这个变量用于存储自增的数字。

2.        |： 这个竖线符号用于分隔多个命令，使它们可以在同一行上执行。

3.        858,888g/$/s/$/\=i/，这是一个替换命令，它的格式为：

                [range]g/pattern/s/pattern/replacement/

           其中：

                858,888g：这个范围命令指定了从858到888行。

                /$/：这个模式匹配每一行的行尾（$表示行尾）。

                s/$/\=i/：这个替换命令将行尾的行尾符号替换为变量i的值，\=表示后面的内容

           作为VimL表达式求值。i将被插入到行末。

4.        let i=i+1：这个命令将变量i的值加1，以便下一个行尾插入操作时使用。

这个命令将会在从第858行到第888行的每一行的行尾插入从130开始的自增数字。每次执行命令时，自增数字将会递增。 

 :let i=130 | 858,888g/$/s/$/\='    '.i/ | let i=i+1

在 Vim 中，点 . 是用来进行[字符串拼接](https://so.csdn.net/so/search?q=%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%8B%BC%E6%8E%A5&spm=1001.2101.3001.7020)的操作符，它将左右两个字符串连接在一起，形成一个新的字符串。此命令即在数字i之前加入四个空格。

yy

复制一行

y+Shift+g（即G）

从光标当前行，复制到最后一行（在第一行的话，等价于:1,$y）

gg

到头部

Shift+g（即G）

到尾部

dd

删除光标行（准确来说是剪切，用p可粘贴出这行）

a

当前光标后面插入

i

当前光标位置插入

Shift+5（即%）

到另一个匹配的括号处

Shift+1

光标到行尾

0

光标到行首

num+方向键

光标向方向移动num格

Note：

vim中的「数字键」代表重复次数，可以配合其他指令简化操作，比如：

10↓或10j可一次向下移动10行。

2p可以一次粘贴2行

2dd可以一次剪切2行

x

删除后一个字符

Shift+x（即X）

删除前一个字符

u

撤回

Ctrl+r

取消撤回

.（小数点）

重复刚才的操作

p

粘贴到下一行

Shift+p（即P）

粘贴到上一行

/word        Shift+8（即*）        Shift+3（即#）

搜索word，*是去搜到的下一个，#是去搜到的下一个；n是下一个，Shift+n是上一个。

二.Ctrl+v可视块模式

        在Vim中，Ctrl+v是一个常用的快捷键组合，用于进入可视块模式，可视块模式可以用于选择和编辑文本块（直接v则选中行，有的命令直接v的时候不可用）。

以下是在Vim中使用Ctrl+v的一些常见用法：

1.选择矩形块：按下Ctrl+v，然后使用方向键移动光标，可选择一个矩形文本块。

2.插入矩形文本：Shift+i 进入插入模式。

3.对齐文本：Shift+:  进入命令行模式，在命令行上输入对齐命令（例如left、right、center等）并按下回车键，可以对所选的文本进行对齐操作。

4.块注释：Shift+i 进入插入模式，输入注释符（例如#或//等），按下Esc键，可以在所选的每一行前添加注释符，实现块注释。

5.复制或剪切矩形块：c 修改所选内容，y 复制所选内容，d 剪切所选内容，p 将所选内容粘贴到光标所在位置。

三.分割窗口

:sp（:split）

在vim中，:sp命令用于水平分割当前窗口并打开一个新的空白文件，在分割窗口之后，你可以在新窗口中编辑文件。这样做的好处就是在编辑的时候，可以在新建窗口中参考其他文件内容或本文件别的内容。

:vsp

垂直分割窗口

:vsp GetBindInfotest.c        即在分割出的窗口打开此文件

一些在分割窗口中操作的常用命令和快捷键包括：

1.Ctrl + w + w                  切换焦点到下一个窗口

2.Ctrl + w + 方向键          在窗口之间切换

3.Ctrl + w + =                   使所有窗口大小相等

4.Ctrl + w + _                   最大化当前窗口的高度

5.Ctrl + w + |                    最大化当前窗口的宽度

6.Ctrl + w + v                   垂直分割窗口并打开文件

7.Ctrl + w + s

8.Ctrl + w + r                    交换窗口位置

要在新窗口中打开文件，可以使用命令 :e <文件路径> 或者 :sp <文件路径>。

当你完成在分割窗口中的操作后，可以使用快捷键 Ctrl + w + c关闭当前窗口；Ctrl + w + q也可以关闭窗口，当只有一个窗口后，将会退出vim。

Note：

1.参考文章

[vim使用教程图文教程（全面，手册）](https://blog.csdn.net/wangyuxiang946/article/details/126560108)

[vim人类史上最好用的文本编辑器！（操作）](https://blog.csdn.net/qing_gee/article/details/114263298?spm=1001.2101.3001.6650.8&utm_medium=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-8-114263298-blog-126560108.235%5Ev38%5Epc_relevant_anti_vip_base&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~BlogCommendFromBaidu~Rate-8-114263298-blog-126560108.235%5Ev38%5Epc_relevant_anti_vip_base&utm_relevant_index=14)

[简明 Vim 练级攻略 | 酷 壳 - CoolShell](https://coolshell.cn/articles/5426.html)

---

# vim+正则表达式
# 1.将每一行的 [ 之后的内容全删除

## :%s/\[.*$//

% 表示对整个文件的每一行操作。

s 是 substitute 的缩写，用于替换文本。

\[ 匹配实际的 [ 字符，因为 [ 在正则表达式中有特殊含义，所以需要用反斜杠进行转义。

.* 匹配任意数量的任意字符（.），这里的 * 意味着零次或多次。

$ 匹配行尾的位置。

// 之后的部分是没有给出替换值，这意味着匹配到的内容会被删除。

这条命令的意思是在每一行中找到第一个 [ 字符开始直到行尾的所有内容，并删除它们。

# 2.将包含PASS的行删除

## :g/PASS/d

:g 命令用于对满足给定模式的行执行命令，即grep。

/PASS 是要匹配的模式，即包含 "PASS" 的行。

/d 是执行的命令，表示删除匹配的行。

# 3.清除每行末尾的全部空格

## :%s/\s\+$//

% 表示对整个文件进行操作。

如果你需要对特定行范围内的空格进行清理，可以使用类似 :1,100 的格式来指定行范围。

s 命令表示替换

这里的 \s\+$ 是一个正则表达式，\s 匹配任何空白字符（包括空格和制表符），+ 表示一个或多个，$ 表示行的结尾。// 后面没有替换文本意味着删除匹配到的部分。

# 4.删除空行

## :1,100g/^$/d

# 5.将所有行的前三个字符删除

## :%s/^\(.\{3}\)//

命令解析

这条命令是由几个部分组成的：

1. %：表示对整个文件的所有行进行操作。
2. s：是 "substitute" 的缩写，用于替换文本。
3. /：用于分隔命令的不同部分。
4. ^\(.\{3}\)：这是一个正则表达式，用于匹配每行的前三个字符。
5. /：再次分隔命令的不同部分。
6. /：这里没有替换文本，表示替换为空（即删除匹配到的内容）。

正则表达式解析

让我们进一步分解正则表达式 ^\(.\{3}\)：

- ^：表示行的开始。这意味着匹配必须从行的最前面开始。
- \(：开始一个捕获组。这里的括号 \( \) 用于标记一个需要特别处理的字符串组。
- .：匹配任何单个字符（除了换行符）。
- \{3\}：表示重复前面的元素三次。在这里，它表示匹配前三个字符。
- \)：结束一个捕获组。

整体命令的含义

- :%s/^\(.\{3}\)//：这条命令的意思是在整个文件（%）的每一行（%）的开始（^）处找到连续的三个字符（.\{3\}），并将这三个字符替换为空（/ 表示替换为空）。

实际效果

这条命令执行的效果就是删除每一行的前三个字符。

在Vim中使用替换命令时，%s/asd/bb/g 和 %s/asd/bb/ 之间的主要区别在于 /g 标志的作用。

%s/asd/bb/

这个命令仅替换每行中第一次出现的模式 asd 并将其替换为 bb。如果没有指定 /g，那么在每行中只会替换第一个匹配项。

%s/asd/bb/g

这个命令会替换每行中所有出现的模式 asd 并将其替换为 bb。这里 /g 是 "global" 的缩写，表示在整个行中进行全局替换，而不仅仅替换第一个匹配项。

示例说明

假设我们有一个包含多行的文本文件，其中有一些行包含多次 "asd" 字符串：

深色版本

1 asd asd asd  
2 asd  
3 asd asd

如果我们运行：

vim

深色版本

:%s/asd/bb/

结果将是：

深色版本

1 bb asd asd  
2 bb  
3 bb asd

而如果我们运行：

vim

深色版本

:%s/asd/bb/g

结果将是：

深色版本

1 bb bb bb  
2 bb  
3 bb bb

可以看到，在没有 /g 的情况下，只有每行的第一个 "asd" 被替换了，而在使用 /g 的情况下，每行中的所有 "asd" 都被替换了。

总结

- %s/pattern/replacement/：仅替换每行中首次出现的模式。
- %s/pattern/replacement/g：替换每行中所有出现的模式。

你可以根据实际需要选择是否使用 /g 标志来进行替换。如果你只想替换每行的第一个实例，那么不需要 /g；如果你想要替换所有匹配的实例，则需要加上 /g。