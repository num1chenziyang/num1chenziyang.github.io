---
title: 1.发版流程
date: 2025-04-06 22:09:01 
categories: 
- SDLC流程记录
- 
tags: 
- 编译
password: 9761565829chen
---
# 一.发版流程

## 1.查看redmine号，确定发版的版号要求。
   

## 2.修改share/vobs/tristarm/build_ver.sh

（1）JDBC_VER=3.5.1_3X2_1  
（2）B_GBASE_VER=3.5.1_3X2_1  
（3）D_ITER_VER，删除 2
 
##现在走gerrit流程，以前的放弃  
##3.为此版本打tag  
##git tag -a {标签名} -m "{标签信息}"  
##例如，创建一个指向最新提交的附注标签：  
##git tag -a ver/3.3.3_1SANSEC_2/vbr1e4_X86_64 -m "Release version 1.0.0"  
##git push origin ver/3.3.3_1SANSEC_2/vbr1e4_X86_64
   

## 3.提交到 gerrit

（1）git remote add gerrit [http://172.16.3.215:8080/code](http://172.16.3.215:8080/code)  
##或者直接编辑.git/config添加gerrit库  
（2）在 code 目录安装 commit_msg hook 脚本，为了每次提交都有 Change-Id，否则无法提交到 gerrit。  
（3）如若合并其他提交，没有 Change-Id，见[增加Change_Id](1.git%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95)。  
更详细的方法见手册
 
note:  
1.确定编译没有问题。  
2.确定安装后的功能没有问题。
   

## 4.code review

提交后，主管进行 code review，提交后，创建 tag，推动到 gerrit2 上。  
此时直接拉 gerrit2 上的分支，进行重新打包，发版。  
（code review 后 commit id会变，所以要重新打包）
   

## 5.验证后发版

（1）验证 ids 版本，onstat -V，onstat -version。
 
（2）取得资源  
```text
GBase8sV8.8_AEE_***.tar
GBase8sV8.8_TL_***.tar
clientsdk_***.tar
cdr
cdrptchk
cdrqchk
cdrqerr
(cdr 资源在ids/vobs/tristarm/sqldist/bin下)
```
 
（3）写完送测说明后送测。