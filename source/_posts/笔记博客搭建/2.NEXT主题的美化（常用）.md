---
title: 2.NEXT主题的美化（常用）
date: 2025-04-01 01:38:00
categories:
  - 笔记博客搭建
tags: 
password:
---
# 参考网页：
[Hexo-Next 主题博客个性化配置超详细，超全面(两万字)](https://blog.csdn.net/as480133937/article/details/100138838)

[Hexo+Next主题搭建个人博客+优化全过程（完整详细版）](https://zhuanlan.zhihu.com/p/618864711)

[hexo 个人博客基于 NexT 主题的基本配置和定制优化 | Chou Bin's Blog](https://choubin.site/2019/12/30/CustomBlogTheme/)
**（将基于此进行next主题优化）**

---

# 一.next修改about内容
要修改Hexo的Next主题中的“关于”页面内容，需通过以下步骤操作：

### 1. **创建或定位“关于”页面**
   • 在Hexo根目录下执行命令生成页面文件：
```bash
hexo new page "about"
```
这会在`source/about`目录下生成`index.md`文件。

### 2. **编辑页面内容**
   • 打开生成的`source/about/index.md`文件，修改其中的Markdown内容。例如：
```markdown
---
title: 关于我
date: 2025-04-02
type: "about"
comments: false  # 若需关闭评论可添加此行
---

这里是你的个人介绍内容，支持Markdown语法。
```
通过调整`title`字段可修改页面标题，正文部分直接编写内容即可。

### 3. **启用菜单项**
   • 在Next主题的配置文件`themes/next/_config.yml`中找到`menu`设置，取消`about`项的注释：
```yaml
menu:
    home: / || home
    about: /about/ || user  # 删除此行前的注释符号“#”
```
确保图标`user`与Font Awesome的图标名称对应，也可自定义其他图标。

### 4. **本地预览与部署**
   • 执行以下命令查看效果：
```bash
hexo clean && hexo s
```
确认无误后部署到服务器：
```bash
hexo clean && hexo g -d
```

### 补充说明
• **内容格式**：支持插入图片、链接、代码块等Markdown元素，例如：
```markdown
![头像](/images/avatar.jpg)
[查看我的GitHub](https://github.com/yourname)
```
• **主题兼容性**：若使用NexT的主题配置文件分离方式（`next.yml`），需在`source/_data/next.yml`中修改菜单设置。
• **多语言支持**：若网站启用了多语言，需在对应语言的翻译文件中调整“关于”页面的显示文本。

---

# 二.next修改各模块背景图片
### 1.准备背景图片
将背景图片（如`bg.jpg`）放置在以下路径：
   ```
   Hexo_HTML/themes/hexo-theme-next/source/images/background.jpg
   ```
   *（若目录不存在请手动创建）*  


### 2.创建专用配置文件styles.styl
在**Hexo根目录**（不是主题目录）新建配置文件：
   ```
   Hexo_HTML/source/_data/styles.styl
   ```
   *（若`_data`文件夹不存在请手动创建）* 


### 3.编写背景样式代码
在新建的`styles.styl`中添加以下内容（按需选择配置）：
```css
/* 全站通用背景 */
body {
  background: url(/images/background.jpg);
  background-repeat: no-repeat;
  background-attachment: fixed; /* 固定不滚动 */
  background-size: cover;      /* 自适应填充 */
  background-position: center;
}

/* 文章内容区域背景 */
.post-block {
  background: url(/images/post-bg.png) rgba(255,255,255,0.9);
}

/* 侧边栏背景 */
.sidebar {
  background: url(/images/sidebar-bg.jpg);
}

/* 页头背景 */
.header-inner {
  background: url(/images/header-bg.png);
}
```
*每个模块的背景图片需单独上传到`images`目录* 
styles.styl在Hexo_HTML/themes/hexo-theme-next生效
对于**styles.styl**文件，根目录就为**Hexo_HTML/themes/hexo-theme-next**
故其指定的/images/background.jpg，其image是在hexo-theme-next下

所以需注意：所有图片路径必须使用`/images/`开头的绝对路径，不要带`themes/next/`前缀 


### 4.激活配置文件
4. 打开主题配置文件`_config.yml`，找到并**取消注释**以下配置：
```yaml
custom_file_path:
  style: source/_data/styles.styl
```
*确保该配置项前无#号* 

### 5.生效配置
5. 执行以下命令（每次修改配置后都需要执行）：
```bash
hexo clean && hexo g && hexo s
```
通过`localhost:4000`预览效果 

---

# 三.next显示文章目录（Table of Contents, TOC）
### 1. **确认 NexT 主题版本**
   - 不同版本的 NexT 配置方式略有不同。可通过主题目录下的 `package.json` 或文档确认版本。
   - 本文以 **NexT v8.x** 为例，其他版本逻辑类似。


### 2. **修改主题配置文件**
   - 打开 NexT 主题的配置文件：`themes/next/_config.yml`。
   - 找到 `toc` 相关配置项，启用并调整参数：

```yaml
# NexT v8.x 配置示例
toc:
  enable: true         # 全局启用 TOC
  number: true         # 标题显示数字编号
  wrap: true           # 允许目录换行
  expand_all: false    # 是否展开所有层级（按需开启）
  max_depth: 3         # 目录最大深度（根据文章标题层级调整）
```


### 3. **在文章中启用 TOC**
   - 在文章的 Markdown 文件头部（Front-matter）中添加 `toc: true`：

```markdown
---
title: 你的文章标题
date: 2023-01-01
toc: true  # 启用本文的目录
---

## 一级标题
### 二级标题
### 二级标题
## 一级标题
...
```


### 4. **检查 Markdown 渲染器**
   - Hexo 默认的 `hexo-renderer-marked` 可能不支持复杂 TOC，建议改用 `hexo-renderer-markdown-it`：
     ```bash
     npm uninstall hexo-renderer-marked --save
     npm install hexo-renderer-markdown-it --save
     ```
   - 在 Hexo 根目录的 `_config.yml` 中添加配置：
     ```yaml
     markdown:
       plugins:
         - markdown-it-toc-done-right
     ```


### 5. **调整目录样式（可选）**
   - 若目录位置或样式不符合预期，可通过自定义 CSS 调整。在 `themes/next/source/css/_custom/custom.styl` 中添加：
     ```css
     /* 调整目录宽度 */
     .post-toc {
       max-width: 300px;
     }
     /* 标题对齐 */
     .post-toc .nav-item {
       padding-left: 10px;
     }
     ```


### 6. **常见问题**
   - **目录不显示**：
     1. 确认文章有至少两个层级标题（如 `##` 和 `###`）。
     2. 清理缓存后重新生成：`hexo clean && hexo g`
   - **样式错乱**：
     检查标题层级是否合理（避免跳跃，如 `#` → `###`）。
   - **版本差异**：
     - NexT v5/6：配置项可能在 `toc` 或 `sidebar` 模块。
     - 部分旧版本需手动添加 `{% include toc %}` 到模板。

---

# 四.next主页只显示文章摘要
## 1.自动截断
 打开`themes/next/_config.yml`，找到`auto_excerpt`配置项并启用：
   ```yaml
   auto_excerpt:
     enable: true
     length: 150  # 自动截取150字符作为摘要
   ```

   • 若需显示“阅读原文”按钮，在主题配置中启用：
```yaml
     read_more_btn: true
```

但是本next系统没有auto_excerpt配置项，需要用`hexo-excerpt`插件


## 2.新版 Next 主题的替代方案（无auto_excerpt）
如果您的主题版本不支持 `auto_excerpt`，可通过以下方式实现类似效果：
1. **安装摘要插件**  
   ```bash
   npm install hexo-excerpt --save
   ```
2. **在 Hexo 根目录的 `_config.yml` 添加配置**  
   ```yaml
   excerpt:
     depth: 3       # 解析3层HTML标签内的内容
     excerpt_excludes: []
     more_excludes: []
     hideWholePostExcerpts: true
   ```

---

# 五.调整边距
## 1.修改styles.styl文件
先按照"二.next修改各模块背景图片"的内容，将文件`"Hexo_HTML/source/_data/styles.styl"`做好并生效，加入以下内容：
```css
/* 针对正文内容区域 */
.post-body,
.content {
  padding: 15px 25px !important;  /* 上下15px，左右25px */
  margin: 10px 0 !important;       /* 与其他区块的间距 */
}
```
即可达到文字和边框有间距的效果。

---

# 六.对styles.styl的说明
以下是我`Hexo_HTML/source/_data/styles.styl`文件的内容，说明一下文件的作用和next主题核心结构示意。
## 1.文件创建与生效
创建文件styles.styl
```shell
touch Hexo_HTML/source/_data/styles.styl
```

让styles.styl文件生效
```shell
vim Hexo_HTML/themes/hexo-theme-next/_config.yml

##然后配置  style: source/_data/styles.styl
```


## 2.文件内容及说明
### <1>文件内容：
```css
body {
    background:url(/images/background.jpg);
    background-repeat: no-repeat;
    background-attachment:fixed;
    /* background-position:100% 100%; */
    background-size: cover;
    background-position: center;
}

/* 文章区域半透明 */
.post-block {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(5px); /* 毛玻璃效果 */
}

/* 侧边栏透明 */
.sidebar {
  background: rgba(255,255,255,0.9) !important;
}

/* 头部导航栏透明 */
.header-inner {
  background: rgba(255,255,255,0.8);
  max-width: 1200px;    /* 默认值为960px，可调整为更大值 */
  width: 90%;
}

::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.3);
}

.main-inner {
  max-width: 1200px;    /* 默认值为960px，可调整为更大值 */
  width: 90%;           /* 使用百分比适配不同屏幕 */
}

/* 针对正文内容区域 */
.post-body,
.content {
  padding: 15px 25px !important;  /* 上下15px，左右25px */
  margin: 10px 0 !important;       /* 与其他区块的间距 */
}
```

### <2> 内容说明：
---`body` 全局背景设置
```stylus
body {
    background: url(/images/background.jpg);
    background-repeat: no-repeat;
    background-attachment: fixed;
    background-size: cover;
    background-position: center;
}
```
- **对应结构**：  
  控制整个页面的背景，包括所有区域（导航栏、侧边栏、文章区等）。
- **修改意义**：  
  - `background: url(...)`：为页面添加背景图片（需确保图片路径 `/images/background.jpg` 存在）。  
  - `background-size: cover`：让背景图覆盖整个视口，保持比例不变形。  
  - `background-attachment: fixed`：背景图固定不随滚动条滚动，增强视觉沉浸感。  
  - `background-position: center`：将背景图居中显示，避免偏移。

---`.post-block` 文章区域半透明
```stylus
.post-block {
  background: rgba(255,255,255,0.85);
  backdrop-filter: blur(5px);
}
```
- **对应结构**：  
  `.post-block` 是包裹单篇文章的容器（包括标题、正文、标签等），位于 `.main-inner` 内部。
- **修改意义**：  
  - `background: rgba(255,255,255,0.85)`：为文章区域添加半透明白色背景，使背景图片若隐若现。  
  - `backdrop-filter: blur(5px)`：对文章区域下方的背景图片施加毛玻璃模糊效果，提升内容可读性（需浏览器支持）。

---`.sidebar` 侧边栏透明**
```stylus
.sidebar {
  background: rgba(255,255,255,0.9) !important;
}
```
- **对应结构**：  
  `.sidebar` 是右侧/左侧的侧边栏模块（包含分类、标签、社交链接等）。
- **修改意义**：  
  - 为侧边栏设置更浅的透明白色背景（`0.9` 透明度），与文章区域（`0.85`）形成层次区分，同时保持与整体背景图的融合感。  
  - `!important` 用于覆盖主题默认的侧边栏背景色，确保生效。

---`.header-inner` 导航栏透明
```stylus
.header-inner {
  background: rgba(255,255,255,0.8);
  max-width: 1200px;
  width: 90%;
}
```
- **对应结构**：  
  `.header-inner` 是顶部导航栏的容器（包含站点标题、菜单栏）。
- **修改意义**：  
  - `background: rgba(255,255,255,0.8)`：让导航栏半透明，与文章区、侧边栏风格统一。  
  - `max-width: 1200px` 和 `width: 90%`：将导航栏宽度与 `.main-inner` 对齐（此前调整过文章区宽度），避免顶部和主体宽度不一致导致的割裂感。

---`.main-inner` 主体区域宽度
```stylus
.main-inner {
  max-width: 1200px;
  width: 90%;
}
```
- **对应结构**：  
  `.main-inner` 是页面核心内容的容器（包裹所有文章 `.post-block` 和分页组件 `.pagination`）。
- **修改意义**：  
  - `max-width: 1200px`：将内容区最大宽度从默认的 `960px` 扩展至 `1200px`，适应大屏显示。  
  - `width: 90%`：在小屏幕上按 90% 比例自适应，避免两侧过于拥挤。

---`.post-body` 和 `.content` 正文边距
```stylus
.post-body, .content {
  padding: 15px 25px !important;
  margin: 10px 0 !important;
}
```
- **对应结构**：  
  - `.post-body`：单篇文章的正文内容容器（包括段落、标题、代码块等）。  
  - `.content`：通用内容容器（可能用于非文章页面，如关于页、分类页）。
- **修改意义**：  
  - `padding: 15px 25px`：为正文内容增加左右内边距，避免文字紧贴边框（此前用户反馈文字紧贴的问题）。  
  - `margin: 10px 0`：在正文上下添加外边距，与其他元素（如标题、代码块）保持间距。  
  - `!important` 用于覆盖主题默认较紧凑的边距。

---滚动条样式（附加说明）
```stylus
::-webkit-scrollbar-thumb {
  background: rgba(0,0,0,0.3);
}
```
- **对应结构**：  
  控制浏览器滚动条的滑块样式（仅对 Webkit 内核浏览器生效，如 Chrome、Edge）。
- **修改意义**：  
  - 将滚动条滑块颜色改为半透明黑色（`rgba(0,0,0,0.3)`），与页面整体浅色风格协调。


## 3.next主题核心结构
```
body
├── .header
│   ├── .header-inner
│   │   ├── .site-brand-container (Logo + 标题)
│   │   └── .menu (导航菜单)
│
├── .main
│   ├── .main-inner (或 .content-wrap)
│   │   ├── .posts-expand (文章列表)
│   │   │   └── .post-block (单篇文章)
│   │   │       ├── .post-header (标题+元数据)
│   │   │       └── .post-body (正文)
│   │   └── .pagination (分页)
│   │
│   └── .sidebar (侧边栏)
│       ├── .sidebar-inner
│       │   ├── .site-overview (站点概览)
│       │   └── .sidebar-nav (侧边栏菜单)
│
└── .footer
    └── .footer-inner
        ├── .copyright (版权信息)
        └── .powered-by (技术支持)
```
