---
title: 3.NEXT文章加密
date: 2025-04-01 01:38:12
categories: 笔记博客搭建
tags: 
password:
---
 # hexo-blog-encrypt
### 一、安装插件
1. **安装 `hexo-blog-encrypt`**  
   在 Hexo 根目录下执行命令：
   ```bash
   npm install hexo-blog-encrypt --save
   ```

---

### 二、配置 Hexo 和 Next 主题
1. **Hexo 全局配置**  
   打开 Hexo 主配置文件 `_config.yml`，添加以下内容：
   ```yaml
   # 启用加密插件
   encrypt:
     enable: true
     default_abstract: 这是一篇加密文章，请输入密码查看。
     default_message: 密码错误，请重试。
   ```

2. **Next 主题兼容性调整**  
   修改 Next 主题配置文件 `themes/next/_config.yml`：
   ```yaml
   # 关闭自动跳转，避免与加密插件冲突
   reading_progress:
     enable: false
   ```

---

### 三、为文章/页面添加密码
#### 方法 1：单篇文章加密
在文章的 Markdown 文件头部（Front-matter）中添加 `password` 字段：
```markdown
---
title: 加密文章示例
date: 2023-01-01
password: mysecret123
abstract: 这里显示自定义提示（可选）
message: 这里显示密码错误提示（可选）
---
```

#### 方法 2：全局默认密码（所有文章生效）
在 Hexo 的 `_config.yml` 中设置默认密码：
```yaml
encrypt:
  enable: true
  default_password: globalpassword123  # 所有文章默认使用此密码
```

---

### 四、验证效果
1. **生成并预览**  
   执行以下命令，访问文章页面查看加密效果：
   ```bash
   hexo clean && hexo g && hexo s
   ```
2. **输入密码**  
   访问加密文章时，页面会显示输入框和提示信息，输入正确密码后内容才会显示。

---

### 五、高级配置
#### 1. 自定义密码输入界面样式
在 Next 主题的自定义 CSS 文件（如 `themes/next/source/css/_custom/custom.styl`）中添加：
```css
/* 调整密码输入框样式 */
#hexo-blog-encrypt {
  background: rgba(0,0,0,0.8);
  padding: 20px;
  border-radius: 8px;
  input {
    border: 1px solid #4a4a4a;
    background: #2d2d2d;
    color: #fff;
  }
  button {
    background: #2196F3;
    color: white;
  }
}
```

#### 2. 排除特定文章不加密
在文章的 Front-matter 中设置 `encrypt: false`：
```markdown
---
title: 公开文章
date: 2023-01-02
encrypt: false  # 强制不加密
---
```

---

### 六、常见问题处理
#### 1. 输入密码后页面无变化
• **原因**：插件与主题脚本冲突。  
• **解决**：在 Next 主题中禁用 `fancybox`（修改 `_config.yml`）：
  ```yaml
  fancybox: false
  ```

#### 2. 移动端输入框错位
• **解决**：添加响应式 CSS 调整布局：
  ```css
  @media (max-width: 767px) {
    #hexo-blog-encrypt {
      padding: 10px;
    }
  }
  ```

#### 3. 插件版本不兼容
• **升级插件**：
  ```bash
  npm update hexo-blog-encrypt --save
  ```

---
