# **1.****目录中某个字符串在所有文件中替换**

# **1.****目录中某个字符串在所有文件中替换**

## find directory -type f -exec sed -i 's/old_string/new_string/g' {} +

此命令的步骤如下：

- ==find== ==是用于查找文件的命令。==
- ==directory== ==是你要搜索的起始目录。==

- ==-type f== ==指定只查找普通文件（====f== ==表示普通文件，====d== ==表示目录等）。==

- ==-exec== ==用于执行一个命令，该命令将应用于每个找到的文件。==

- ==sed== ==是一个流编辑器，常用于文本处理。==
- ==-i== ==表示就地（in-place）编辑文件。这意味着== ==sed== ==会直接修改文件内容，而不是输出到标准输出。==
- =='s/old_string/new_string/g'== ==是== ==sed== ==的替换命令，用于将文件中的== ==old_string== ==替换为== ==new_string====。====g== ==表示全局替换，即替换每一行中所有的匹配项。==
- =={}== ==是== ==find== ==命令传递给== ==-exec== ==子命令的占位符，表示当前找到的文件。==
- ==+== ==表示允许== ==-exec== ==后面跟多个文件，这样可以提高性能，避免为每个文件都启动一个新的进程。==
    
# **2.****统计目录中代码的总行数**

## find /path/to/directory -type f -exec cat {} + | wc -l

与上述同理  
wc -l：将 cat 命令输出的内容传递给 wc -l 命令进行行数统计
   

**3.****统计一个目录中剔除可执行程序和库文件的总行数**  
使用find命令结合grep和wc命令来实现。假设目录名称为directory：  
find directory -type f ! -executable ! -name '*.so*' -exec grep -v '^$' {} + | wc -l  
==此命令的步骤如下：==  
==find directory -type f====：==  
        ==查找目录====directory====下的所有文件。==  
==! -executable====：==  
        ==排除可执行程序，只选择非可执行文件。==  
==! -name '*.so*'====：==  
        ==排除库文件，只选择非库文件。==  
==-exec grep -v '^$' {} +====：==  
        ==对选定的文件执行====grep====命令，过滤掉空行。==  
==| wc -l====：==  
        ==将过滤后的结果通过管道传递给====wc====命令，统计行数。==
   

**二****.****规整格式**  
**1.****快速删除****^M**  
**1.**        **:%s/\r//g**  
将本文件^M删除，如果出现^V则用:%s/^V//g，%s/\r//gc形式则是挨个确认替换。  
**2.**        **:set ff=unix**        **:w**  
把格式换成unix，^M将会全部消失，保存即可。  
**3.****整个目录下全局删除****^M**  
find /home/czy/gci_esqlc/gtest/src -type f -exec sed -i 's/\r//g' {} +
 
**2.****删除只有空格的行的空格（或制表符）**  
**1.**        **:%s/^\s*$//**

- ==^\s*$== ==是正则表达式的模式：==
    
    - ==^== ==表示行的开头==
    - ==\s*== ==表示匹配零个或多个空白字符（包括空格和制表符）==
    - ==$== ==表示行的末尾==
- ==替换部分为空，即删除匹配到的内容。==

**2.****整个目录下全局操作**  
find /home/czy/gci_esqlc/gtest/src -type f -exec sed -i 's/^\s*$//g' {} +

## find directory -type f -exec sed -i 's/old_string/new_string/g' {} +

**find directory**  
**-type f**  
**-exec**  
**sed -i 's/old_string/new_string/g' {} +**
    
# **2.****统计目录中代码的总行数**

## find /path/to/directory -type f -exec cat {} + | wc -l