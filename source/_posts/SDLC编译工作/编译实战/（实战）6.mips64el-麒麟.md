---
title: （实战）6.mips64el-麒麟
date: 2025-04-01 22:31:50
categories:
  - SDLC编译工作
  - 编译实战
tags:
  - 编译
password: 9761565829chen
---
# （前言）机器详情

| 2025-02-24 |                 |                       |
| ---------- | --------------- | --------------------- |
| ipv4       | 172.16.2.134    | ifconfig              |
| 架构         | mips64el        | uname -a              |
| 处理器        | loongson-3B1500 | cat /proc/cpuinfo     |
| 系统         | NeoKylin（中标麒麟）  | cat /etc/.productinfo |
| 机房位置       |                 |                       |
| 密码         | root            | root                  |
172.16.2.134

---

# （一）编译问题集合
## 一.pcre-8.38 重做
## 1.问题

|        |                          |
| ------ | ------------------------ |
| 报错信息来源 | ids/vobs/tristarm        |
| 报错信息内容 | 找不到文件 pcre.h 与 libpcre.a |

## 2.分析
/usr/cm 下对应的 pcre 工具未做

## 3.解决
1./usr/cm/nightly_build/cache/ids_pcre，将 pcre-8.38.zip 解压，源码编译，ar 打包 .a 文件即可。  
2.在源码编译的过程中，configure 识别不了架构。通过报错信息反推缺失的信息，发现需要加上-build=mips64el 参数，才能正确的 configure。

## 4.经验
要有 ”通过报错信息，反推问题所在” 的思想。


## 二.-std=c++03 报错
改为-std=c++98，因为 gcc 版本问题。已经修改的地方：  
1.vobs/blade/bts/src/Makefile.lu  
2.setup/setup.linuxmips64el  
3.vobs/tristarp/iwa/dwaroot/db2z/build/makefile.ids


## 三.重复#include<asm/siginfo.h>
tristarp/belib/mtex.c  
注释掉#include<asm/siginfo.h>
