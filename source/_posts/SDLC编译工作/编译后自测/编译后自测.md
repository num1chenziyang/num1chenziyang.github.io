---
title: 1.数据库自测
date: 2025-04-01 22:12:42
categories:
  - SDLC编译工作
  - 编译后自测
tags:
  - 编译
  - 测试
password:
---
# （前言）自测流程说明
当一个项目完成后，需要进行自测。现在自测内容如下：

| 测试内容    | 说明                               | 掌握情况   |
| ------- | -------------------------------- | ------ |
| NQA     | 回归测试，最全面                         | ✅      |
| rd_test | 自测用例合集                           | ✅      |
| fhts    | 测试的用例合集                          | ✅（待整理） |
| 高可用测试   | 倘若涉及高可用，需要测试高可用<br>（HDR、SDS 等）   | ✅      |
| 通讯加密测试  | 倘若涉及 openssl，需测试通讯加密<br>（证书、抓包等） | ✅      |
| 接口测试    | 倘若涉及接口，需要进行接口测试<br>（接口编译、连通数据库等） | ✅      |
一般来说，在一个普通的发版任务中，需要进行 NQA、rd_test 测试，通过即可发版。

---

# （一）接口测试
## 一.ODBC测试
### 1.制作 csdk 的 ksh 文件
#### 1.ids 对应的 csdk 的 ksh 脚本
export LD_LIBRARY_PATH=/home/czy/csdk/**lib**:/home/czy/csdk/**lib/cli**:/home/czy/csdk/**lib/esql**:$LD_LIBRARY_PATH
export GBASEDBTSQLHOSTS=/home/czy/csdk/sqlhosts.ol_czy_351
export GBASEDBTSERVER=ol_czy_351
export GBASEDBTDIR=/home/czy/csdk
export ODBCINI=/home/czy/csdk/etc/odbc.ini（供 odbc 使用）


### 2.ODBC（本机）
#### 1.执行 ids 和 csdk 的 ksh 文件

#### 2.配置 csdk/etc/odbc.ini
修改连接信息与 demo 中要执行的文件匹配。  
[odbc_demo]  
Drive=/home/czy/csdk/lib/cli/iclit09b.so  
Description=GBase ODBC DRIVER  
Database czy  
LogonID=root  
pwd=Power@Gbase8s  
Servername=ol_gbasedbt1210_8

#### 3.csdk/demo/cli/dbcreate.c
SQLCHAR defDsn[] = "odbc_demo";

#### 4.设置环境变量
export GBASEDBTDIR=/home/czy/csdk  
export ODBCINI=/home/czy/csdk/etc/odbc.ini

#### 5.执行 demo
进入 csdk/demo/cli  
make dbcreate  
./dbcreate  
成功执行，则 csdk 的 odbc 部分正常。


### 3.ODBC（其他机器）
#### 1.大体上与本机一致
仍然执行本机 ids 的 ksh，这个实例要与其他机器实例配置 sqlhost。

#### 2.csdk/etc/odbc.ini
Servername 更换为其他机器的实例名。

#### 3.ids/etc/sqlhosts
本机与其他机器，互相配置对方的 sqlhost。


### 4.esqlc 编译 ec
#### 1.先执行配套 ids 的 ksh

#### 2.配置环境变量

#### 3.执行 esql 编译命令
esql -o TestESQLC -glu TestESQLC.ec


### 5.gci
[南大通用GBase 8s GCI使用指南](https://www.gbase.cn/community/post/4319)



## 二.jdbc测试



---

# （二）高可用测试

---

# （三）通讯加密测试

---

# （四）rd_test

---

# （五）fhts