**GBase 8s 连接管理器（** **CM** **）配置方法**  
==一、==  **单独** **CM**  
==1.==  **在****$** **GBASEDBT** **DIR/etc** **目录下创建** **sqlhosts.cm1** **文件，内容如下：**  
==g_west    group   -       -       i=10==  
==ol_54_pri onsoctcp 192.168.152.25 23701 g=g_west==  
==ol_54_sds onsoctcp 192.168.152.26 23702 g=g_west==  
==cm_update       group   -       -       i=12,c=0==  
==oltp onsoctcp 192.168.152.25 25000 g=cm_update==  
   
==2.==  **在** **$** **GBASEDBT** **DIR/etc** **目录下创建** **onconfig.cm1** **文件，内容如下：**  
==NAME            cm1==  
==LOGFILE         ${== ==GBASEDBT== ==DIR}/tmp/cm1.log==  
==CM_TIMEOUT      40==  
==SECONDARY_EVENT_TIMEOUT 20==  
==EVENT_TIMEOUT   30==  
==SQLHOSTS        LOCAL==  
==LOG             1==  
==DEBUG           1==  
   
==CLUSTER main==  
=={==  
  ==GBASEDBT== ==SERVER        g_west==  
 ==SLA oltp    DBSERVERS=PRI+SDS   WORKERS=16==  
 ==FOC ORDER=ENABLED  TIMEOUT=10 RETRY=1  PRIORITY=1==  
==}==  
   
==3.==  **启停** **CM**  
==启动====cm==  
==export==   ==GBASEDBT== ==SQLHOSTS=$== ==GBASEDBT== ==DIR/etc/sqlhosts.cm1==  
==oncmsm -c $== ==GBASEDBT== ==DIR/etc/config.cm1==  
==关闭====CM==  
==oncmsm -k==  ==cm1==  
==二、==  **CM** **集群**  
==1.==  **配置CM 集群：**  
==在主节点创建sqlhosts.cm1 ：内容==  
==g_west  group   -       -       i=10==  
==ol_54_pri onsoctcp 192.168.152.25 23701 g=g_west==  
==ol_54_sds onsoctcp 192.168.152.26 23702 g=g_west==  
   
==cm_update  group  -    -        i=12,c=0==  
==oltp_all1       onsoctcp  192.168.152.25  23000 g=cm_update==  
==oltp_all2       onsoctcp  192.168.152.26  23000 g=cm_update==  
   
==cm_read   group  -    -        i=14,c=0==  
==oltp_read1       onsoctcp  192.168.152.25  23001 g=cm_read==  
==oltp_read2       onsoctcp  192.168.152.26  23001 g=cm_read==  
==2.==  **创建****etc/** **on** **config.cm1** **文件，内容如下：**  
==NAME            cm1==  
==LOGFILE         ${== ==GBASEDBT== ==DIR}/tmp/cm1.log==  
==CM_TIMEOUT      40==  
==SECONDARY_EVENT_TIMEOUT 20==  
==EVENT_TIMEOUT   30==  
==SQLHOSTS        LOCAL==  
==LOG             1==  
==DEBUG           1==  
==CLUSTER main==  
=={==  
  ==GBASEDBT== ==SERVER         g_west==  
 ==SLA oltp_all1         DBSERVERS=PRI   WORKERS=16==  
 ==SLA oltp_read1        DBSERVERS=SDS   WORKERS=16==  
 ==FOC ORDER=ENABLED TIMEOUT=10 RETRY=1 PRIORITY=1==  
==}==  
==3.==  **更改** **sqlhosts.cm1** **，** **on** **config.cm1** **两个文件的权限：**  
==chown== ==GBASEDBT== ==:== ==GBASEDBT==  ==sqlhosts.cm1== ==on== ==config.cm1==  
==chmod 660 sqlhosts.cm1== ==on== ==config.cm1==  
==4.==  **在命令行执行**  
==export== ==GBASEDBT== ==DIR=/home/54_For_S== ==SC== ==/==  
==export== ==GBASEDBT== ==SQLHOSTS=/home/54_For_S== ==SC== ==/etc/sqlhosts.cm1==  
==5.==  **在** **SDS** **节点配置****CM** **，创建** **etc/sqlhosts.cm2** **，内容如下：**  
==g_west  group   -       -       i=10==  
==ol_54_pri onsoctcp 192.168.152.25 23701 g=g_west==  
==ol_54_sds onsoctcp 192.168.152.26 23702 g=g_west==  
   
==cm_update  group  -    -        i=12,c=0==  
==oltp_all1       onsoctcp  192.168.152.25  23000 g=cm_update==  
==oltp_all2       onsoctcp  192.168.152.26  23000 g=cm_update==  
   
==cm_read  group  -    -        i=14,c=0==  
==oltp_read1       onsoctcp  192.168.152.25  23001 g=cm_read==  
==oltp_read2       onsoctcp  192.168.152.26  23001 g=cm_read==  
==6.==  **创建****etc/config.cm2** **文件，内容如下：**  
==NAME            cm2==  
==LOGFILE         ${== ==GBASEDBT== ==DIR}/tmp/cm2.log==  
==CM_TIMEOUT      40==  
==SECONDARY_EVENT_TIMEOUT 20==  
==EVENT_TIMEOUT   30==  
==SQLHOSTS        LOCAL==  
==LOG             1==  
==DEBUG           1==  
==CLUSTER main==  
=={==  
  ==GBASEDBT== ==SERVER         g_west==  
 ==SLA oltp_all2       DBSERVERS=PRI   WORKERS=16==  
 ==SLA oltp_read2      DBSERVERS=SDS   WORKERS=16==  
 ==FOC ORDER=ENABLED TIMEOUT=10 RETRY=1 PRIORITY=== ==2== ==}==  
==7.==  **更改** **sqlhosts.cm2** **，** **config.cm2** **两个文件的权限：**  
==chown==     ==GBASEDBT== ==:== ==GBASEDBT==     ==sqlhosts.cm2==  ==on== ==config.cm2==           
==chmod 660 sqlhosts.cm2== ==on== ==config.cm2==  
==8.==  **在** **SDS 节点** **执行下列语句**  
==export== ==GBASEDBT== ==DIR=/home/54_For_SDS/==  
==export== ==GBASEDBT== ==SQLHOSTS=/home/54_For_SDS/etc/sqlhosts.cm1==  
==9.==  **在** **PRI** **节点启动****cm1** **管理器：**  
==oncmsm -c /home/54_For_S== ==SC== ==/== ==etc== ==/config.cm1==  
==在== ==SDS== ==节点启动====cm2== ==管理器：==  
==oncmsm -c /home/54_For_S== ==SC== ==/== ==etc== ==/config.cm2==  
==10.==  **在集群中任意节点均可查看到****cm** **状态。**  
==onstat -g cmsm==